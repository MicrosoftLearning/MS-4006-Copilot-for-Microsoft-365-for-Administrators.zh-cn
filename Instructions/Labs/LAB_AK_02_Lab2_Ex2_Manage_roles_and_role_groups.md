# 学习路径 2 - 实验室 2 - 练习 2 - 管理角色和角色组

在本练习中，你将继续担任 Adatum 新 Microsoft 365 管理员 Holly Dickson 的角色。 作为 Adatum 的 Microsoft 365 试点项目的一部分，你将通过将 Microsoft 365 管理员角色分配给你的实验室托管提供商创建的 Microsoft 365 用户帐户中的几个来管理管理委派。 本练习将为你提供使用三种不同的方法来分配这些角色的体验：1) 通过将角色直接分配给 Microsoft 365 管理中心中的用户帐户；2) 通过创建角色组、将角色分配给角色组，然后将角色组分配给 Microsoft 365 管理中心中的用户；以及 3) 通过使用 Windows PowerShell 向用户分配角色。 将 Microsoft 365 管理员角色分配到多个现有用户帐户后，你将通过验证用户是否有权根据其角色进行操作来测试这些分配。 


### 任务 1 - 在 Microsoft 365 管理中心分配管理员角色

Holly Dickson 已被分配 Microsoft 365 全局管理员角色。 你将继续担任 Holly 的角色，在此过程中，你将使用 Microsoft 365 管理中心将管理员权限分配给其中一个 Adatum 用户。 在此任务中，你将向 Diego Siciliani 的用户帐户分配计费管理员角色。

1. 你已完成处理 LON-DC1 的上一个实验室练习。 现在，你应切回 LON-CL1 以执行本实验室练习中的 Microsoft 365 管理任务。**** 作为最佳做法，典型的 Microsoft 365 管理任务应在客户端电脑上而不是公司的域控制器上执行。  <br/>

    请切换到 LON-CL1****。 

2. 在 LON-CL1 中，在 Edge 浏览器中的 Microsoft 365 管理中心，你应该延续之前的实验室练习仍以 Holly Dickson 的身份登录。******** 在左侧导航窗格中，选择“用户”，然后选择“活动用户”。******** 

3. 在“活动用户”列表中，选择“Diego Siciliani”。********  <br/>

    **注意：** 选择 Diego 的姓名，不要选中他姓名左侧的复选框。 如果想要在用户列表上方显示的菜单栏中执行某个与用户相关的操作（例如“管理产品许可证”和“管理角色”），则通常会使用此复选框来选择多个用户。******** 选择用户的姓名后，会打开该用户专门的属性窗格。

4. 在显示的“Diego Siciliani”窗格中，默认显示“帐户”选项卡。******** 在此选项卡中，向下滚动到“角色”部分，然后选择“管理角色”。******** 

5. 在“管理管理员角色”窗口中，“用户(无管理中心访问权限)”选项当前默认处于选中状态。******** 若要为 Diego 分配管理员角色，请选择“管理中心访问权限”选项。**** 这会引出一组常用管理员角色的列表供你选择。 

6. Diego 已被提升为计费管理员，但由于此角色未显示在常用角色列表中，请向下滚动并选择“按类别显示所有”。**** 

7. 在按类别排序的角色列表中，向下滚动到“其他”类别，选中“计费管理员”复选框，然后选择“保存更改”。************ <br/>

    **
          **提示：请注意保存管理员角色更改后显示在窗格顶部的消息。 此消息提供了在实际部署中维护管理角色时应记住的以下最佳做法：通过分配最小权限角色，仅向用户提供其所需的访问权限。****

8. 在“管理管理员角色”窗口中，选择屏幕右上角的 X 将其关闭。******** 这会将你带回到“活动用户”列表。**** 

9. 保持以 Holly Dickson 的身份登录到 LON-CL1 和 Microsoft 365 管理中心。

### 任务 2 - 在 Microsoft 365 管理中心使用角色组分配管理员角色

在前面的任务中，你在 Microsoft 365 管理中心直接将管理员角色分配给了 Diego Siciliani 的用户帐户。 在此任务中，你将改为使用角色组分配角色。 你将在 Microsoft 365 管理中心创建一个安全角色组，向其分配用户管理角色，然后将该角色组分配到 Lynne Robbin 的用户帐户。

1. 在 LON-CL1 中，你仍应以 Holly Dickson 的身份登录到 Microsoft 365 管理中心。 如果没有，请立即执行此操作。

2. 在“Microsoft 365 管理中心”中，选择导航窗格中的“团队和组”，然后选择“活动团队和组”。************ 

3. 在“活动团队和组”页上，默认显示“Teams 和 Microsoft 365 组”选项卡。******** 选择“安全组”选项卡。****

4. 在“安全组”选项卡上，选择菜单栏上的“+添加安全组”。******** 这样做会启动“添加安全组”向导。****

5. 在“添加安全组”向导中，在“设置基本信息”页上，在“名称”字段中输入“用户管理角色组”。**************** 在“说明”字段中输入“此角色组包含用户管理角色”。******** 选择**下一步**。

6. 在“编辑设置”页上，选中“可将 Azure AD 角色分配到组”复选框，然后选择“下一步”。************

7. 在“查看并完成添加组”页上，检查设置。**** 如果需要更改任何设置，请选择相应的“编辑”选项并进行更改。**** 如果所有设置都正确，请选择“创建组”。****

8. 创建了“用户管理角色组”后，选择“关闭”。********

9. 创建了角色组后，必须向其分配相应的角色。 在“活动团队和组”页上，会显示“安全组”选项卡。******** 选择“用户管理角色组”以打开其详细信息窗格。****

10. 在“用户管理角色组”窗格中，默认显示“常规”选项卡。******** 在“角色”部分下，选择“管理角色”。********

11. 在显示的“管理管理员角色”窗格中，选择“管理中心访问权限”选项。******** 在直接显示在此选项下方的常见管理员角色列表中，选中“用户管理员”和“用户体验成功管理员”复选框。******** 然后选择“按类别显示所有”选项。**** 向下滚动到“标识”类别。**** 请注意，“用户管理员”角色已被选中，因为你之前在常用角色列表中选择了它。**** 在此“标识”类别中，选择“帮助台管理员”角色，然后选择“保存更改”。************ 

12. 在“管理管理员角色”窗格中，三个所选角色应显示在“管理中心访问权限”选项下。******** 选择详细信息窗格右上角的 **X** 以将其关闭。

13. 在“安全组”选项卡下，选择“用户管理角色组”。******** 在显示的“用户管理角色组”窗格中，验证这三个角色是否显示在“角色”部分中。******** 关闭此窗格。

14. 将角色分配到角色组后，必须将角色组分配给 Lynne Robbin 的用户帐户。 在“Microsoft 365 管理中心”，选择“活动用户”。********

15. 在“活动用户”页上，选择“Lynne Robbins”。******** 

16. 在显示的“Lynne Robbins”窗格中，默认显示“帐户”选项卡。******** 在前面的任务中，当你将计费管理员角色分配到 Diego Siciliani 的帐户时，你在“角色”部分下选择了“管理角色”选项。******** 但是，由于你将通过角色组分配 Lynne 的角色，因此必须将 Lynne 分配为你刚创建的安全角色组的成员。 通过组分配，Lynne 将继承分配给角色组的角色。 因此，在“组”部分下，选择“管理组”。******** 

17. 在“管理组”窗格中，选择“+分配成员身份”。********

18. 在“分配成员身份”窗格中，选中“用户管理角色组”复选框，然后选择“添加(1)”。************

19. 在页面顶部显示“已保存”通知后，关闭此窗格。**** 

20. 若要验证 Lynne 是否继承了分配给用户管理角色组的角色，请从活动用户列表中选择“Lynne Robbins”。**** 

21. 在显示的“Lynne Robbins”窗格中，在默认显示的“帐户”选项卡中，你应会看到分配给 Lynne 的三个用户管理角色。******** 在“角色”部分下**，选择“管理角色”。********

22. 在显示的“管理管理员角色”窗格中，在“管理中心访问权限”选项下，记下所选的三个角色以及它们被分配给 Lynne 时来自的组的名称。******** 另请注意，这三个角色是灰显的。这表示无法从此窗口中取消选择角色。 由于角色已从包含这些角色的角色组分配给了 Lynne，因此只能通过移除 Lynne 的角色组成员身份来取消分配角色。 你刚刚验证了 Lynne 确实被分配了这些角色。 关闭此“管理管理员角色”窗格。****

23. 保持以 Holly Dickson 的身份登录到 LON-CL1 和 Microsoft 365 管理中心。

### 任务 3 - 使用 Windows PowerShell 分配管理员角色  

在此任务中，你将使用 Windows PowerShell 将角色分配给用户帐户。 这样做将为你提供在 PowerShell 中执行此管理功能的经验，因为某些管理员更喜欢使用 PowerShell 执行此类维护。  

在此任务中，Holly 希望将 Patti Fernandez 分配到服务支持管理员角色。 若要使用 Microsoft Graph PowerShell 模块将用户添加到管理员角色，必须先获取该用户的对象 ID 和角色的对象 ID。 如果角色尚未启用（这意味着它尚未被分配给用户或尚未以物理方式启用），则必须首先启用该角色，然后才能使用 PowerShell 将其分配给用户。 在此任务中，你将先启用服务支持管理员角色，然后再将其分配给 Patti Fernandez。

PowerShell 还让你能够显示分配给特定角色的所有用户，这在审核 Microsoft 365 部署时很重要。 在此任务中，你还将了解如何使用 PowerShell 显示分配给特定角色的所有用户。 

1. 在 LON-CL1 中，选择你在上一个实验室中打开的任务栏上的 Windows PowerShell 图标。 如果关闭了该 PowerShell 窗口，请使用与之前相同的指令打开提升的实例。 

2. PowerShell 会话应延续之前你使用 PowerShell 恢复了已删除的组的实验室，仍然连接到 Microsoft Graph PowerShell。 但是，如果你之前关闭了 PowerShell 并刚刚重新打开它，请使用上一实验室练习中的步骤导入 Microsoft.Graph.Identity.DirectoryManagement 子模块。 

3. 若要在 Microsoft Graph PowerShell 中执行 Microsoft 365 用户维护任务，必须先导入 Microsoft.Graph.Users 子模块并请求读取/写入权限。 若要导入此子模块，请在命令提示符处键入以下命令，然后按 Enter：   <br/>

        Import-Module Microsoft.Graph.Users

4. 在前面的实验室练习中，你已连接到 Microsoft Graph 并请求了“Directory.ReadWrite.All”权限来运行还原了已删除的组的 cmdlet。 若要更新此任务中的用户和角色对象，Holly 现在必须为每个对象请求读取/写入权限。 若要请求这些权限，请在命令提示符处键入以下命令，然后按 Enter：  <br/>

        Connect-MgGraph -Scopes 'User.ReadWrite.All', 'RoleManagement.ReadWrite.Directory'

5. 在显示的“选取帐户”窗口中，选择 Holly Dickson 的帐户。**** 

6. 在显示的“请求权限”对话框中，选中“代表组织同意”复选框，然后选择“接受”。************

7. Holly 希望将 Patti Fernandez 分配到“服务支持管理员”角色。******** 若要使用 Microsoft Graph PowerShell 分配此角色，必须先获取服务支持管理员角色的对象 ID，以便你可以将其分配给 Patti。 但是，在 Microsoft Graph PowerShell 中，你只能分配“已启用”的角色。 已启用的角色是从角色模板启用的角色，或者已经通过 PowerShell 或 Microsoft 365 管理中心向用户分配了的角色。 <br/>

    **重要提示：** 在执行此步骤之前，请验证 PowerShell 窗口是否处于全屏模式。 角色名称显示在屏幕最右侧的最后一列中。 如果未处于全屏模式，则你看不到与每个对象 ID 关联的角色名称。 

    若要查看 Microsoft 365 中所有已启用的角色，请在命令提示符处输入以下命令，然后按 Enter： <br/>
    
        Get-MgDirectoryRole    <br/>

    **注意：** 此命令会显示到目前为止已在 Microsoft 365 中启用的角色。 如果服务支持管理员角色出现在此列表中，则可以直接转到步骤 13 来将角色分配给 Patti。 但是，由于此已启用的角色列表中不包含服务支持管理员，因此必须执行步骤 8-12 来从相应的角色模板启用角色，然后才能在步骤 13 中将 Patti 分配到该角色。 

8. 若要在 Microsoft Graph PowerShell 中启用角色，必须先找到其模板以获取模板的对象 ID。 你需要知道模板的对象 ID 才能从模板启用角色。 可通过两种方式查看角色模板 - 可以显示整个角色模板列表，也可以显示特定角色的模板。 作为学习体验，你将执行这两种方法，以便了解差异。 <br/>

    首先，显示角色模板的完整列表及其对象 ID 和显示名称。 为此，请键入以下命令，然后按 Enter： <br/>

        Get-MgDirectoryRoleTemplate | Format-List Id, DisplayName   <br/>

    运行此命令后可以看到，你必须滚动浏览角色模板列表来查找服务支持管理员角色。 你很容易就会发现这样是多么繁琐。 或者，运行以下命令以查询特定角色模板 - 在本例中即“服务支持管理员”角色模板： <br/>

        Get-MgDirectoryRoleTemplate | ? DisplayName -eq "Service Support Administrator"   <br/>

    运行此命令后，你可以看到它只显示请求的角色模板。 显然，有时可能需要显示整个角色模板列表。 但是，当你需要查找某个角色模板时，运行第二个 PowerShell 命令比滚动浏览整个模板列表更有效。
    
9. 在上一步中查询了服务支持管理员角色模板后，请突出显示其 ID（例如 fe930be7-5e62-47db-91af-98c3a49a38b1），然后按 Ctrl+C 将其复制到剪贴板（复制时，突出显示将消失）。********

10. 现在，你将创建一个变量，用于捕获服务支持管理员模板的特性。 键入以下命令时，按 Ctrl+V 粘贴你在上一步中复制到剪贴板的服务支持管理员模板 ID。**** <br/>

    在命令提示符处，键入以下命令并按 Enter 键： <br/>

        $ServiceSupportRoleTemplate = @{ RoleTemplateID = "paste in template ID here" }  <br/>

    例如：$ServiceSupportRoleTemplate = @{ RoleTemplateID = "fe930be7-5e62-47db-91af-98c3a49a38b1" }

11. 现在，你可以根据你在 $ServiceSupportRoleTemplate 变量中捕获的模板特性启用服务支持管理员角色。 输入以下命令并按 Enter 键：  <br/>

        New-MgDirectoryRole -BodyParameter $ServiceSupportRoleTemplate

12. 若要验证服务支持管理员角色是否已启用，请键入以下命令，然后按 Enter。 此命令将显示已启用的角色列表：  <br/>
            
        Get-MgDirectoryRole <br/>

    **注意：** 此命令会显示所有已启用角色的对象 ID，包括你刚从模板启用的服务支持管理员角色。 稍后在步骤 15 中，当你将 Patti 分配到此角色时，你将复制粘贴服务支持管理员角色的对象 ID。

13. 若要将 Patti Fernandez 分配到新启用的服务支持管理员角色，必须先获取 Patti 用户帐户的对象 ID。 为此，请键入以下命令并按 Enter： <br/>

        Get-MgUser | Format-List ID, DisplayName

14. 当你知道了最近启用的服务支持管理员角色的对象 ID 和 Patti 用户帐户的对象 ID 后，可以将该角色分配给 Patti。 执行以下步骤以完成此过程： <br/>

    a. 在上一个命令中，你显示了活动用户的列表。 突出显示 Patti 帐户的 ID 并将其复制 (Ctrl+C) 到剪贴板。******** 复制到剪贴板后突出显示会消失。  <br/>

    b. 运行以下命令，创建包含 Patti 用户帐户的目录对象的变量。 键入此命令时，请粘贴 (Ctrl+V) 你刚刚复制的 Patti 用户帐户的 ID。**** <br/>

        $UserObject = @{ "@odata.id" = "https://graph.microsoft.com/v1.0/directoryObjects/paste in Patti's user account ID here" }  <br/>

    例如：$UserObject = @{ "@odata.id" = "https://graph.microsoft.com/v1.0/directoryObjects/22fddbf7-42d2-4698-be65-ebc972a023e3" }

    c. 在步骤 12 中，你显示了已启用的角色列表。 突出显示服务支持管理员角色的 ID 并将其复制 (Ctrl+C) 到剪贴板。**** <br/>

    d. 运行以下命令，将包含 Patti 用户帐户 ($UserObject) 的变量分配给目录角色。 键入此命令时，请粘贴 (Ctrl+V) 你刚刚复制的服务支持管理员角色的 ID。**** <br/> 

        New-MgDirectoryRoleMemberByRef -DirectoryRoleId 'paste in the ID of the role here' -BodyParameter $UserObject
                
15. 你现在想要验证 Patti 是否已被分配到服务支持管理员角色。 你之前已将此角色的对象 ID 复制到剪贴板，并将其粘贴到上一命令中。 你应也将其粘贴到此命令中。 键入以下命令然后按 Enter：
    
        Get-MgDirectoryRoleMember -DirectoryRoleId 'paste in the ID of the role here' 
                
16. 前面的命令只显示了分配给所选角色的用户的 ID。 但是，你可以将显示的 ID 与 Patti 的 ID 匹配，以验证是否已为其帐户分配了“服务支持管理员”角色。**** 可以看到，Patti 是分配给该角色的唯一用户。 

17. 现在，让我们重复此过程，查看分配给全局管理员角色的所有用户。 重复步骤 15 以验证已分配到“全局管理员”角色的 Adatum 用户数。**** 若要完成此命令，必须先将全局管理员角色的 ID 复制 (Ctrl+C) 到剪贴板。**** 你可以在运行步骤 12 时已启用的角色列表中找到此 ID。 <br/>

    **警告：** 复制全局管理员角色的 ID，而不是全局管理员角色模板的 ID。

18. 验证是否有多个已分配到全局管理员角色的 Adatum 用户。 在实际方案中，Microsoft 365 管理员会使用此 PowerShell 命令监视其 Microsoft 365 部署中存在的全局管理员数量。 然后，他们将为任何真正不应该拥有全局管理员的用户移除此角色（请记住，最佳做法准则是在 Microsoft 365 部署中拥有 2 到 4 名全局管理员，具体取决于组织的大小）。  <br/>

    在本实验室中，当你的实验室托管提供商将全局管理员角色分配给 MOD 管理员以外的用户（然后你将其分配给了 Holly Dickson）时，你将按原样保留这些用户。 在此虚构的 Adatum 部署中，没有必要浪费时间从他们的帐户中移除此角色。 此外，将来的一些实验室任务的前提是，这些用户被分配了全局管理员角色。 <br/>

    **重要提示：** 请记住，在实际部署中，Microsoft 365 管理员应定期监视全局管理员角色，使分配的用户数保持在 2 到 4 之间。
    
19. 让 Windows PowerShell 会话保持打开状态以供将来的实验室练习使用，但在执行下一个任务之前，请将其最小化。


### 任务 4 - 验证角色分配 

在此任务中，你将首先检查两个用户的管理属性，即 Joni Sherman 和 Lynne Robbins。 然后，你将作为每个用户登录到 Client 2 VM (LON-CL2) 中的 Microsoft 365 主页，以确认你在先前任务中管理他们的管理委派时所做的多项更改。 最后，作为 Lynne Robbins，你将执行两项重要的用户帐户维护任务 - 重置密码和阻止用户帐户。

1. 在 LON-CL1 中，你仍应以 Holly Dickson 的身份登录到 Microsoft 365 管理中心。 如果没有，请立即执行此操作。

2. 在 Microsoft 365 管理中心，如果未显示“活动用户”，请立即导航到该页面。********  

3. 在“活动用户”列表中，选择“Joni Sherman”********。 

4. 在“Joni Sherman”属性窗口中，默认显示“帐户”选项卡。******** 在“角色”部分下，它应指示 Joni“没有管理员访问权限”。******** 选择右上角的 X 以关闭 Joni 的属性窗口。****

5. 在“活动用户”列表中，选择“Lynne Robbins”。******** 

6. 在“Lynne Robbins”的属性窗口中，它应指示 Lynne 已被分配“用户管理员”角色。******** 关闭 Lynne 的属性窗口。

7. 切换到客户端 2 VM (LON-CL2)。****

8. 在 LON-CL2 中，在登录屏幕上，你将使用 Pa55w.rd 密码以本地管理员帐户身份登录。************

9. 如果出现“网络”窗口，请选择“是”。********

10. 在任务栏上，选择 Microsoft Edge 图标。 如有必要，最大化 Edge 浏览器窗口。

11. 在 Edge 浏览器中，导航到 ******https://portal.office.com**。 

12. 首先以 Joni Sherman 身份登录到 Microsoft 365。**** 在“登录”窗口中，输入 **JoniS@xxxxxZZZZZZ.onmicrosoft.com**（其中 xxxxxZZZZZZ 是你的实验室托管提供商提供的租户前缀）。**** 在“输入密码”窗口中，输入实验室托管提供商为租户管理员帐户（即 MOD 管理员帐户）提供的相同“Microsoft 365 租户密码”。********

13. 在“保持登录?”窗口中，选中“不再显示此内容”复选框，然后选择“是”。************ 如果出现“保存密码”窗口，请选择“永不”。********

14. 如果页面中间出现“欢迎使用 Microsoft 365”对话框，请选择向前箭头 (>) 两次，然后选中复选标记将其关闭。****

15. 如果显示了“查找更多应用”窗口，请选择窗口右上角的 X 将其关闭。********

16. 在“欢迎使用 Microsoft 365”窗口（即 Joni 的 Microsoft 365 主页）上，屏幕左侧会显示一个导航窗格，指示用户有权访问的应用程序。**** 在此“应用”窗格中，请注意，“管理员”选项未显示。******** 这是因为 Joni 从未被分配过 Microsoft 365 管理员角色。 

17. 现在，你将以 Joni 身份退出登录 Microsoft 365。 在 Microsoft Edge 中，在“欢迎使用 Microsoft 365”页面的右上角，选择 Joni Sherman 的用户图标（右上角的圆圈，其中有 Joni 的图片），然后在显示的 Joni Sherman 窗口中选择“退出登录”。******************** 

18. 现在，你将以 Lynne Robbins 的身份重新登录到 Microsoft 365。**** 在当前的 Edge 浏览器选项卡中，它应显示一条消息，指示“Joni，你现已退出登录”。******** 在此窗口中，你可以选择以 Joni 的身份重新登录或以其他用户的身份登录。 选择“切换到其他帐户”，然后在显示的“电子邮件地址”字段中输入 ****LynneR@xxxxxZZZZZZ.onmicrosoft.com（其中 xxxxxZZZZZZ 是你的实验室托管提供商提供的租户前缀），然后选择“登录”。************ 在“输入密码”窗口中，输入实验室托管提供商为租户管理员帐户（即 MOD 管理员帐户）提供的相同“Microsoft 365 租户密码”。********

19. 如果出现“欢迎使用 Microsoft 365”对话框，请选择向前箭头 (>) 两次，然后选择复选标记以关闭窗口。****

20. 如果显示了“查找更多应用”窗口，请选择窗口右上角的 X 将其关闭。********

21. 在“欢迎使用 Microsoft 365”窗口（即 Lynne 的 Microsoft 365 主页）上，请注意，管理员图标显示在屏幕左侧的导航窗格中。******** 之所以显示此图标，是因为 Lynne 已被分配到 Microsoft 365 管理员角色。 选择管理员图标以打开 Microsoft 365 管理中心。****

22. 在 Microsoft 365 管理中心，选择导航窗格中的“用户”，然后选择“活动用户”。************ 

23. 作为“用户管理员”，Lynne 有权更改用户密码。**** 最近，Diego Siciliani 和 Pradeep Gupta 与 Lynne 联系，称他们的密码可能已被泄露。******** 根据 Adatum 的公司策略，Lynne 必须将他们的密码重置为临时值，然后强制他们在下次登录时重置密码。   <br/>

    在“活动用户”列表中，将鼠标从一个用户帐户移动到另一个用户帐户时，请注意每个用户名右侧显示的钥匙（重置密码）图标。******** 选择 Diego Siciliani 姓名右侧显示的钥匙图标。****

24. 在 Diego 的“重置密码”窗口中，如果“自动创建密码”复选框显示复选标记，则选中此框将其清除。******** 这将使 Lynne 能够手动为 Diego 分配临时密码。  

25. 在“密码”字段中输入“diego”。******** 请注意在密码右侧，系统会显示一条消息，指示这是“弱”密码。**** 另请注意显示在字段下方的消息，它指示了强密码的要求。 最后，请注意窗格底部的“重置密码”按钮未启用。**** 只有在输入强密码后，才会启用此按钮。****  

26. 验证是否选中了“要求此用户在首次登录时更改其密码”复选框（如果未选中，请立即选中它以显示复选标记）。**** 在“密码”字段中输入“Pa55w.rd”。******** 请注意，“密码”字段指示这是强密码。**** <br/>

    但是，现在请选择“要求此用户在首次登录时更改其密码”复选框以清除它。**** 请注意显示的错误消息，它指示密码 (Pa55w.rd) 包含使它易于被猜出的单词、短语或一系列数字。 在此例中，你输入了单词“password”的变体，这将触发此错误。**** 如果强制用户在首次登录时更改密码，则系统会允许你输入此密码。 但是，如果不强制用户在首次登录时输入其他密码，则不允许使用此密码。

27. 在这两次失败的密码尝试后，Lynne 已决定让 Microsoft 365 自动生成密码。 选中“自动创建密码”复选框，使其显示复选标记。**** <br/>
    
28. 自动生成的密码只是临时密码，因为 Lynne 希望强制 Diego 在下次登录时更改它。 因此，请验证“要求此用户在首次登录时更改其密码”复选框是否显示复选标记。如果没有，则选中该复选框，使其显示复选标记。****

29. 选择**重置密码**。

30. 如果系统提示保存密码，请选择“永不”以关闭窗口。****

31. 你应收到一条错误消息，指出你无法重置 Diego 的密码，因为他已被分配管理员角色。 Diego 的情况是，你在本实验室练习的前面部分中为他分配了计费管理员角色。 由于只有全局管理员可以更改另一个管理员的密码，并且由于 Lynne 不是全局管理员，因此她必须请 Holly Dickson 进行此更改。 在“重置密码”窗格中选择“关闭”。******** 

32. 如果出现调查请求窗口，请选择“取消”。****

33. 在“活动用户”列表中，选择 Pradeep Gupta 的钥匙（重置密码）图标。************ 

34. 在 Pradeep 的“重置密码”窗口中，验证“自动创建密码”复选框是否显示复选标记。如果没有，请立即选中此框，以便系统自动生成 Pradeep 的密码。********  <br/>

    这只是一个临时密码，因为 Lynne 想强制 Pradeep 在下一次登录时更改它。 因此，请验证“要求此用户在首次登录时更改其密码”复选框是否显示复选标记。如果没有，则选中该复选框，使其显示复选标记。****
    
35. 选择“重置密码”按钮。****

36. 在“密码已重置”窗口中，你应收到一条消息，指示你已成功重置 Pradeep 的密码。**** 选择**关闭**。

37. 管理层最近发现 Alex Wilber 的用户名可能已泄露。 因此，Lynne 被要求阻止 Alex 的帐户，以便没有人能够使用他的用户名登录，直到管理层能够确定问题的严重程度。 在“活动用户”列表中，选中 Alex Wilber 姓名左侧的复选框（请勿选择 Alex 的姓名）。********  <br/>

    **重要提示：** 由于你要运行全局命令而不是与 Alex 帐户关联的命令，所以只需在活动用户列表中选中 Alex 的帐户。 如果选择了任何其他用户帐户，则必须在继续之前取消选择该用户帐户。 滚动浏览活动用户列表，并验证是否未选择其他用户帐户。 如果选择了非 Alex 的帐户，请选中该帐户的复选框将其清除。 应该只选择 Alex Wilber 的帐户。****

38. 在页面顶部的菜单栏中，选择省略号图标 (...) 以显示其他操作的下拉菜单。**** 在出现的菜单中，选择“编辑登录状态”。****

39. 在显示的“阻止登录”窗格中，验证 Alex 的电子邮件地址是否显示在“阻止登录”标题下方。******** 选中“阻止此用户登录”复选框，然后选择“保存更改”。******** 

40. “阻止登录”窗口应显示一条消息，指示 Alex 现已被阻止登录（如果 Alex 的用户名真的泄漏了，则没有人可以使用他的用户名登录）。**** 此外，Alex 将在 60 分钟内自动退出登录 Microsoft 服务。 选择窗格右上角的“X”来关闭它。**** 

41. Lynne 刚刚被告知，Nestor Wilke 的用户名可能也泄漏了。**** 重复步骤 33 到 36 以阻止 Nestor 登录（并阻止其他人使用他的用户名登录）。 <br/>

    当你尝试阻止 Nestor 的登录时，你应收到一条错误消息，指示“无法保存更改”。**** 收到此错误的原因是 Nestor 是全局管理员，而 Lynne 不是。 只有全局管理员才能阻止另一个全局管理员登录。 Lynne 需要请 Holly Dickson 进行这一修改。 <br/>

    关闭“阻止登录”窗格。****

42. 你之前阻止了 Alex Wilber 登录。 若要验证他是否被阻止，你将尝试以 Alex 的身份登录。 通过选择 Lynne Robbins 的用户图标（右上角带有 Lynne 的图片的圆圈）退出登录 Microsoft 365，然后在显示的 Lynne Robbins 窗口中，选择“退出登录”。************ 

43. 最佳做法是，退出登录后，关闭除“退出登录”选项卡以外的所有浏览器选项卡。**** 在“退出登录”选项卡上，导航到 **https://portal.office.com**。**** 

44. 在“选取帐户”窗口中，选择“使用另一个帐户”。******** 在“登录”窗口中，输入 **AlexW@xxxxxZZZZZZ.onmicrosoft.com**（其中 xxxxxZZZZZZ 是你的实验室托管提供商提供的租户前缀）。**** 在“输入密码”窗口中，输入实验室托管提供商为租户管理员帐户（即 MOD 管理员帐户）提供的相同“Microsoft 365 租户密码”。********  <br/>

    此时会显示“选取帐户”窗口，它应显示一条错误消息，指示“你的帐户已被锁定。******** 请联系支持人员解除锁定，然后重试”。 你刚刚验证了 Alex（或已取得 Alex 的用户名和密码的人员）无法登录。 <br/>

    **注意：** 帐户阻止可能需要几分钟来完全实现。 在系统中实施该阻止之前，Alex 可能仍能登录，但不会有任何 Microsoft 365 服务可供他使用，并且它们不会显示在 Microsoft 365 门户中。 取消阻止帐户后，服务将再次可用。 <br/>

    如果你可以以 Alex 的身份登录，请退出登录并等待几分钟。 可以借此机会短暂休息一下。 然后尝试重新以 Alex 的身份登录。 此时，你应该会收到错误消息，指示 Alex 的帐户已被阻止登录。 
    
45. 切换回 LON-CL1。**** 

46. 在 LON-CL1 中，你仍应在 Edge 浏览器中以 Holly Dickson 的身份登录到 Microsoft 365。******** “活动用户”列表应显示在此任务前面的 Microsoft 365 管理中心内。******** 

47. 经过进一步调查，Adatum 的 CTO 确定 Alex Wilber 的帐户实际上并没有泄漏，因此，CTO 要求 Holly 移除对 Alex 用户帐户的阻止。 重复步骤 33 到 36 以取消阻止其帐户。 请注意，步骤 35 中的“阻止登录”窗口现在显示的是“取消阻止登录”窗口。********  <br/>

    在“取消阻止登录”窗口中，当前选中了“阻止此用户登录”复选框。******** 选中此复选框将其清除，然后选择“保存更改”。**** <br/>
    
    **重要提示：** 系统将显示一条警告消息，指示 Alex 可能需要在 15 分钟后才能重新登录。 鉴于培训的时间限制，你无需尝试验证 Alex 是否可以重新登录。**** 如果想要测试此操作，可以在以后休息或有空时尝试以 Alex 的身份登录。现在，请留在 LON-CL1，并只需关闭“取消阻止登录”窗口。****
    
48. 在 LON-CL1 中，将浏览器和所有选项卡保持打开状态，然后继续下一练习。 


# 实验室 2 结束

